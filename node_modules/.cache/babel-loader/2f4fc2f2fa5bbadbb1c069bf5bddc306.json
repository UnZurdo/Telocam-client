{"remainingRequest":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/thread-loader/dist/cjs.js!/Users/zurdo/Projects/vue-auth-vuex/node_modules/babel-loader/lib/index.js!/Users/zurdo/Projects/vue-auth-vuex/node_modules/vuetify-loader/lib/loader.js!/Users/zurdo/Projects/vue-auth-vuex/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zurdo/Projects/vue-auth-vuex/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zurdo/Projects/vue-auth-vuex/src/components/Solicitar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zurdo/Projects/vue-auth-vuex/src/components/Solicitar.vue","mtime":1548438640155},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/vuetify-loader/lib/loader.js","mtime":1543737895000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport format from \"date-fns/format\";\nimport axios from \"axios\";\nimport store from \"../store.js\";\nimport { API_BASE } from \"../config\";\nexport default {\n  data: function data() {\n    return {\n      CoverLetter: \"\",\n      CoverLetter_url: \"\",\n      file: \"\",\n      name: \"\",\n      empresa: \"\",\n      project: \"\",\n      email: \"\",\n      description: \"\",\n      phone: \"\",\n      sector: \"\",\n      url: \"\",\n      user: \"\",\n      menu: false,\n      inputRules: [function (v) {\n        return !!v || \"This field is required\";\n      }, function (v) {\n        return v.length >= 3 || \"Minimum length is 3 characters\";\n      }],\n      loading: false,\n      dialog: false\n    };\n  },\n  methods: {\n    pickFile: function pickFile() {\n      this.$refs.image.click();\n    },\n    onFilePicked: function onFilePicked(e) {\n      var _this = this;\n\n      var files = e.target.files;\n\n      if (files[0] !== undefined) {\n        this.CoverLetter = files[0].name;\n\n        if (this.CoverLetter.lastIndexOf(\".\") <= 0) {\n          return;\n        }\n\n        var fr = new FileReader();\n        fr.readAsDataURL(files[0]);\n        fr.addEventListener(\"load\", function () {\n          _this.CoverLetter_url = fr.result;\n          _this.file = files[0]; // this is an image file that can be sent to server...\n        });\n      } else {\n        this.CoverLetter = \"\";\n        this.file = \"\";\n        this.CoverLetter_url = \"\";\n      }\n    },\n    submit: function submit() {\n      if (this.$refs.form.validate()) {\n        this.loading = true;\n        var formData = new FormData();\n        formData.append(\"file\", this.file);\n        var project = {\n          EmpresaFK: this.project.EmpresaFK,\n          PracticaFK: this.project.practicas_id,\n          AccountFK: this.user.account_id,\n          sector: this.sector,\n          Status: \"pendiente\",\n          CoverLetter: this.CoverLetter\n        };\n        console.log(project);\n        axios.post(\"\".concat(API_BASE, \"/applications/new\"), project, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        }).then(function (response) {\n          console.log(\"response\", response);\n        }).catch(function (error) {\n          console.log(\"error\", error);\n        }); // Upload file to server\n\n        axios.post(\"\".concat(API_BASE, \"/applications/upload/\") + localStorage.user, formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        }).then(function (response) {\n          console.log(\"response\", response);\n        }).catch(function (error) {\n          console.log(\"error\", error);\n        });\n        this.$emit(\"solicitudEnviada\");\n      }\n\n      this.loading = false;\n      this.dialog = false;\n    },\n    getUser: function getUser() {\n      var _this2 = this;\n\n      var url = \"\".concat(API_BASE, \"/user/\") + localStorage.user;\n      console.log(url);\n      axios.get(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.token\n        }\n      }).then(function (response) {\n        _this2.user = response.data.data;\n        console.log(\"ResponseU\", response);\n        console.log(\"User\", _this2.user);\n      });\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    axios.get(\"\".concat(API_BASE, \"/practicas/\") + this.$route.params.id, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.token\n      }\n    }).then(function (response) {\n      console.log(response.data.data);\n      _this3.project = response.data.data;\n      var URL = \"\".concat(API_BASE, \"/empresas/\") + response.data.data.EmpresaFK;\n      axios.get(URL, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.token\n        }\n      }).then(function (response) {\n        console.log(response);\n        _this3.empresa = response.data.data;\n\n        _this3.getUser();\n      });\n    });\n  }\n};",{"version":3,"sources":["Solicitar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,OAAA,MAAA,MAAA,iBAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,KAAA,MAAA,aAAA;AACA,SAAA,QAAA,QAAA,WAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,eAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,EAJA;AAKA,MAAA,OAAA,EAAA,EALA;AAMA,MAAA,OAAA,EAAA,EANA;AAOA,MAAA,KAAA,EAAA,EAPA;AAQA,MAAA,WAAA,EAAA,EARA;AASA,MAAA,KAAA,EAAA,EATA;AAUA,MAAA,MAAA,EAAA,EAVA;AAWA,MAAA,GAAA,EAAA,EAXA;AAYA,MAAA,IAAA,EAAA,EAZA;AAaA,MAAA,IAAA,EAAA,KAbA;AAcA,MAAA,UAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,wBAAA;AAAA,OADA,EAEA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,MAAA,IAAA,CAAA,IAAA,gCAAA;AAAA,OAFA,CAdA;AAkBA,MAAA,OAAA,EAAA,KAlBA;AAmBA,MAAA,MAAA,EAAA;AAnBA,KAAA;AAqBA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,KAAA;AACA,KAHA;AAKA,IAAA,YALA,wBAKA,CALA,EAKA;AAAA;;AACA,UAAA,KAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,CAAA,CAAA,KAAA,SAAA,EAAA;AACA,aAAA,WAAA,GAAA,KAAA,CAAA,CAAA,CAAA,CAAA,IAAA;;AACA,YAAA,KAAA,WAAA,CAAA,WAAA,CAAA,GAAA,KAAA,CAAA,EAAA;AACA;AACA;;AACA,YAAA,EAAA,GAAA,IAAA,UAAA,EAAA;AACA,QAAA,EAAA,CAAA,aAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,QAAA,EAAA,CAAA,gBAAA,CAAA,MAAA,EAAA,YAAA;AACA,UAAA,KAAA,CAAA,eAAA,GAAA,EAAA,CAAA,MAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,KAAA,CAAA,CAAA,CAAA,CAFA,CAEA;AACA,SAHA;AAIA,OAXA,MAWA;AACA,aAAA,WAAA,GAAA,EAAA;AACA,aAAA,IAAA,GAAA,EAAA;AACA,aAAA,eAAA,GAAA,EAAA;AACA;AACA,KAvBA;AAwBA,IAAA,MAxBA,oBAwBA;AACA,UAAA,KAAA,KAAA,CAAA,IAAA,CAAA,QAAA,EAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,YAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,IAAA;AAEA,YAAA,OAAA,GAAA;AACA,UAAA,SAAA,EAAA,KAAA,OAAA,CAAA,SADA;AAEA,UAAA,UAAA,EAAA,KAAA,OAAA,CAAA,YAFA;AAGA,UAAA,SAAA,EAAA,KAAA,IAAA,CAAA,UAHA;AAIA,UAAA,MAAA,EAAA,KAAA,MAJA;AAKA,UAAA,MAAA,EAAA,WALA;AAMA,UAAA,WAAA,EAAA,KAAA;AANA,SAAA;AAQA,QAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AAEA,QAAA,KAAA,CACA,IADA,WACA,QADA,wBACA,OADA,EACA;AACA,UAAA,OAAA,EAAA;AACA,4BAAA,kBADA;AAEA,YAAA,aAAA,EAAA,YAAA,YAAA,CAAA;AAFA;AADA,SADA,EAOA,IAPA,CAOA,UAAA,QAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,QAAA;AACA,SATA,EAUA,KAVA,CAUA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,KAAA;AACA,SAZA,EAfA,CA4BA;;AACA,QAAA,KAAA,CACA,IADA,CAEA,UAAA,QAAA,6BAAA,YAAA,CAAA,IAFA,EAGA,QAHA,EAIA;AACA,UAAA,OAAA,EAAA;AACA,4BAAA,qBADA;AAEA,YAAA,aAAA,EAAA,YAAA,YAAA,CAAA;AAFA;AADA,SAJA,EAWA,IAXA,CAWA,UAAA,QAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,QAAA;AACA,SAbA,EAcA,KAdA,CAcA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,KAAA;AACA,SAhBA;AAiBA,aAAA,KAAA,CAAA,kBAAA;AACA;;AACA,WAAA,OAAA,GAAA,KAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KA3EA;AA6EA,IAAA,OA7EA,qBA6EA;AAAA;;AACA,UAAA,GAAA,GAAA,UAAA,QAAA,cAAA,YAAA,CAAA,IAAA;AAEA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,MAAA,KAAA,CACA,GADA,CACA,GADA,EACA;AACA,QAAA,OAAA,EAAA;AACA,0BAAA,kBADA;AAEA,UAAA,aAAA,EAAA,YAAA,YAAA,CAAA;AAFA;AADA,OADA,EAOA,IAPA,CAOA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,WAAA,EAAA,QAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,MAAA,CAAA,IAAA;AACA,OAXA;AAYA;AA7FA,GAxBA;AAwHA,EAAA,OAxHA,qBAwHA;AAAA;;AACA,IAAA,KAAA,CACA,GADA,CACA,UAAA,QAAA,mBAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA,EACA;AACA,MAAA,OAAA,EAAA;AACA,wBAAA,kBADA;AAEA,QAAA,aAAA,EAAA,YAAA,YAAA,CAAA;AAFA;AADA,KADA,EAOA,IAPA,CAOA,UAAA,QAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,MAAA,MAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,GAAA,GAAA,UAAA,QAAA,kBAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AACA,MAAA,KAAA,CACA,GADA,CACA,GADA,EACA;AACA,QAAA,OAAA,EAAA;AACA,0BAAA,kBADA;AAEA,UAAA,aAAA,EAAA,YAAA,YAAA,CAAA;AAFA;AADA,OADA,EAOA,IAPA,CAOA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,OAAA;AACA,OAXA;AAYA,KAvBA;AAwBA;AAjJA,CAAA","sourcesContent":["<template>\n  <v-dialog max-width=\"600px\" v-model=\"dialog\">\n    <v-btn flat slot=\"activator\" class=\"success\">Solicitar</v-btn>\n    <v-card>\n      <v-card-title class=\"subheading grey--text pl-4\">\n        <h2>Enviar Solicitud a la Empresa</h2>\n      </v-card-title>\n      <v-card-text>\n        <v-form class=\"px-3\" ref=\"form\">\n          <div>\n            <h3>Puesto</h3>\n            <span>{{ project.practica }}</span>\n          </div>\n          <br>\n          <div>\n            <h3>Empresa</h3>\n            <span>{{ empresa.empresa }}</span>\n          </div>\n\n          <v-text-field\n            label=\"Añadir Cover Letter\"\n            @click=\"pickFile\"\n            v-model=\"CoverLetter\"\n            prepend-icon=\"attach_file\"\n          ></v-text-field>\n          <input\n            type=\"file\"\n            style=\"display: none\"\n            ref=\"image\"\n            accept=\"application/pdf\"\n            @change=\"onFilePicked\"\n          >\n          <v-spacer></v-spacer>\n          <v-btn flat @click=\"submit\" class=\"success mx-0 mt-3\" :loading=\"loading\">Enviar</v-btn>\n        </v-form>\n      </v-card-text>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nimport format from \"date-fns/format\";\nimport axios from \"axios\";\nimport store from \"../store.js\";\nimport { API_BASE } from \"../config\";\n\nexport default {\n  data() {\n    return {\n      CoverLetter: \"\",\n      CoverLetter_url: \"\",\n      file: \"\",\n      name: \"\",\n      empresa: \"\",\n      project: \"\",\n      email: \"\",\n      description: \"\",\n      phone: \"\",\n      sector: \"\",\n      url: \"\",\n      user: \"\",\n      menu: false,\n      inputRules: [\n        v => !!v || \"This field is required\",\n        v => v.length >= 3 || \"Minimum length is 3 characters\"\n      ],\n      loading: false,\n      dialog: false\n    };\n  },\n  methods: {\n    pickFile() {\n      this.$refs.image.click();\n    },\n\n    onFilePicked(e) {\n      const files = e.target.files;\n      if (files[0] !== undefined) {\n        this.CoverLetter = files[0].name;\n        if (this.CoverLetter.lastIndexOf(\".\") <= 0) {\n          return;\n        }\n        const fr = new FileReader();\n        fr.readAsDataURL(files[0]);\n        fr.addEventListener(\"load\", () => {\n          this.CoverLetter_url = fr.result;\n          this.file = files[0]; // this is an image file that can be sent to server...\n        });\n      } else {\n        this.CoverLetter = \"\";\n        this.file = \"\";\n        this.CoverLetter_url = \"\";\n      }\n    },\n    submit() {\n      if (this.$refs.form.validate()) {\n        this.loading = true;\n        let formData = new FormData();\n        formData.append(\"file\", this.file);\n\n        const project = {\n          EmpresaFK: this.project.EmpresaFK,\n          PracticaFK: this.project.practicas_id,\n          AccountFK: this.user.account_id,\n          sector: this.sector,\n          Status: \"pendiente\",\n          CoverLetter: this.CoverLetter\n        };\n        console.log(project);\n\n        axios\n          .post(`${API_BASE}/applications/new`, project, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(function(response) {\n            console.log(\"response\", response);\n          })\n          .catch(function(error) {\n            console.log(\"error\", error);\n          });\n        // Upload file to server\n        axios\n          .post(\n            `${API_BASE}/applications/upload/` + localStorage.user,\n            formData,\n            {\n              headers: {\n                \"Content-Type\": \"multipart/form-data\",\n                Authorization: \"Bearer \" + localStorage.token\n              }\n            }\n          )\n          .then(function(response) {\n            console.log(\"response\", response);\n          })\n          .catch(function(error) {\n            console.log(\"error\", error);\n          });\n        this.$emit(\"solicitudEnviada\");\n      }\n      this.loading = false;\n      this.dialog = false;\n    },\n\n    getUser() {\n      const url = `${API_BASE}/user/` + localStorage.user;\n\n      console.log(url);\n      axios\n        .get(url, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        })\n        .then(response => {\n          this.user = response.data.data;\n          console.log(\"ResponseU\", response);\n          console.log(\"User\", this.user);\n        });\n    }\n  },\n\n  mounted() {\n    axios\n      .get(`${API_BASE}/practicas/` + this.$route.params.id, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.token\n        }\n      })\n      .then(response => {\n        console.log(response.data.data);\n        this.project = response.data.data;\n        const URL = `${API_BASE}/empresas/` + response.data.data.EmpresaFK;\n        axios\n          .get(URL, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(response => {\n            console.log(response);\n            this.empresa = response.data.data;\n            this.getUser();\n          });\n      });\n  }\n};\n</script>\n"],"sourceRoot":"src/components"}]}