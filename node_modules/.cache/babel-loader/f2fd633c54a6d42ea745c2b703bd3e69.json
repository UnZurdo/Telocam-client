{"remainingRequest":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/babel-loader/lib/index.js!/Users/zurdo/Projects/vue-auth-vuex/node_modules/vuetify-loader/lib/loader.js!/Users/zurdo/Projects/vue-auth-vuex/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zurdo/Projects/vue-auth-vuex/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zurdo/Projects/vue-auth-vuex/src/views/Admin/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zurdo/Projects/vue-auth-vuex/src/views/Admin/Profile.vue","mtime":1548383731572},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/vuetify-loader/lib/loader.js","mtime":1543737895000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/Users/zurdo/Projects/vue-auth-vuex/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport store from \"../../store.js\";\nimport { API_BASE } from \"../../config\";\nimport Profile from \"../../components/Profile.vue\";\nexport default {\n  components: {\n    Profile: Profile\n  },\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      empresa: \"\",\n      user_id: this.$route.params.id,\n      CV: \"\",\n      CV_url: \"\",\n      file: \"\",\n      alert: false,\n      nombrecompleto: \"\",\n      projects: null,\n      personal_website: \"\",\n      email: \"\",\n      phone: \"\",\n      linkedin: \"\",\n      carrera: \"\",\n      curso: 0,\n      FechaGraduacion: \"\"\n    }, _defineProperty(_ref, \"CV\", \"\"), _defineProperty(_ref, \"password\", \"\"), _defineProperty(_ref, \"inputRules\", [function (v) {\n      return !!v || \"This field is required\";\n    }, function (v) {\n      return v.length >= 3 || \"Minimum length is 3 characters\";\n    }]), _defineProperty(_ref, \"loading\", false), _defineProperty(_ref, \"dialog\", false), _ref;\n  },\n  methods: {\n    pickFile: function pickFile() {\n      this.$refs.image.click();\n    },\n    onFilePicked: function onFilePicked(e) {\n      var _this = this;\n\n      var files = e.target.files;\n\n      if (files[0] !== undefined) {\n        this.CV = files[0].name;\n\n        if (this.CV.lastIndexOf(\".\") <= 0) {\n          return;\n        }\n\n        var fr = new FileReader();\n        fr.readAsDataURL(files[0]);\n        fr.addEventListener(\"load\", function () {\n          _this.CV_url = fr.result;\n          _this.file = files[0]; // this is an image file that can be sent to server...\n        });\n      } else {\n        this.CV = \"\";\n        this.file = \"\";\n        this.CV_url = \"\";\n      }\n    },\n    fetchData: function fetchData() {\n      var _this2 = this;\n\n      var url = \"\".concat(API_BASE, \"/user/\") + this.$route.params.id;\n      console.log(url);\n      axios.get(url, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.token\n        }\n      }).then(function (response) {\n        console.log(\"Response\", response);\n        _this2.projects = response.data.data;\n        _this2.email = response.data.data.email;\n        _this2.curso = response.data.data.Curso;\n        _this2.linkedin = response.data.data.LinkedIn;\n        _this2.nombrecompleto = response.data.data.NombreCompleto;\n        _this2.personal_website = response.data.data.personal_website;\n        _this2.carrera = response.data.data.carrera;\n        _this2.phone = response.data.data.Phone;\n        _this2.CV = response.data.data.CV;\n        _this2.CV_url = response.data.data.CV_url;\n        console.log(_this2.projects);\n      });\n    },\n    update: function update() {\n      console.log(\"UPDATE\");\n\n      if (this.$refs.form.validate()) {\n        this.loading = true;\n        var project = {\n          email: this.email,\n          Curso: this.curso,\n          LinkedIn: this.linkedin,\n          NombreCompleto: this.nombrecompleto,\n          personal_website: this.personal_website,\n          carrera: this.carrera,\n          Phone: this.phone\n        };\n        var URL = \"\".concat(API_BASE, \"/user/\") + this.$route.params.id;\n        console.log(\"Project\", project);\n        console.log(\"URL\", URL);\n        axios.put(URL, project, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        }).then(function (response) {\n          console.log(\"Response1\", response);\n          this.alert = true;\n        }).catch(function (error) {\n          console.log(error);\n        }); // Upload file to server\n\n        var formData = new FormData();\n        formData.append(\"file\", this.file);\n        URL = \"\".concat(API_BASE, \"/user/upload/\") + this.$route.params.id;\n        axios.put(URL, formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        }).then(function (response) {\n          console.log(\"response2\", response);\n        }).catch(function (error) {\n          console.log(\"error\", error);\n        });\n        this.$emit(\"solicitudEnviada\");\n      }\n\n      this.loading = false;\n      this.dialog = false;\n    },\n    sortBy: function sortBy(prop) {\n      if (this.direction) {\n        this.direction = false;\n        this.projects.sort(function (a, b) {\n          return a[prop] < b[prop] ? -1 : 1;\n        });\n      } else {\n        this.direction = true;\n        this.projects.sort(function (a, b) {\n          return a[prop] > b[prop] ? -1 : 1;\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.fetchData();\n  }\n};",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"login\">\n    <v-container class=\"pa-5\">\n      <div>\n        <v-alert v-model=\"alert\" dismissible type=\"success\">Perfil actualizado</v-alert>\n      </div>\n      <v-card class=\"pa-5\">\n        <v-card-title class=\"text-center\">\n          <v-container>\n            <h1 class=\"heading grey--text ml-2\">Profile</h1>\n          </v-container>\n        </v-card-title>\n\n        <v-card-text>\n          <v-form class=\"px-3\" ref=\"form\">\n            <v-text-field\n              v-model=\"nombrecompleto\"\n              prepend-icon=\"perm_identity\"\n              label=\"Nombre Completo\"\n              :rules=\"inputRules\"\n            ></v-text-field>\n            <v-text-field v-model=\"email\" prepend-icon=\"email\" label=\"Email\" :rules=\"inputRules\"></v-text-field>\n\n            <v-text-field v-model=\"personal_website\" label=\"Web personal\" prepend-icon=\"web\"></v-text-field>\n            <v-text-field v-model=\"phone\" label=\"Phone*\" prepend-icon=\"local_phone\"></v-text-field>\n            <v-text-field v-model=\"carrera\" label=\"Carrera*\" prepend-icon=\"work\"></v-text-field>\n            <v-text-field v-model=\"linkedin\" label=\"LinkedIn\" prepend-icon=\"link\"></v-text-field>\n            <div class=\"ml-4\">\n              <span class=\"font-weight-light\">Curso</span>\n              <br>\n              <number-input v-model=\"curso\" :min=\"1\" :max=\"7\" inline controls></number-input>\n            </div>\n            <v-spacer></v-spacer>\n\n            <v-text-field\n              label=\"Seleciona CV\"\n              @click=\"pickFile\"\n              v-model=\"CV\"\n              prepend-icon=\"attach_file\"\n            ></v-text-field>\n            <input\n              type=\"file\"\n              style=\"display: none\"\n              ref=\"image\"\n              accept=\"application/pdf\"\n              @change=\"onFilePicked\"\n            >\n            <v-spacer></v-spacer>\n\n            <v-btn flat @click=\"update\" class=\"success ml-4 mt-3\" :loading=\"loading\">Update</v-btn>\n          </v-form>\n        </v-card-text>\n      </v-card>\n\n      <Profile :user_id=\"user_id\"/>\n    </v-container>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport store from \"../../store.js\";\nimport { API_BASE } from \"../../config\";\nimport Profile from \"../../components/Profile.vue\";\n\nexport default {\n  components: { Profile },\n\n  data() {\n    return {\n      empresa: \"\",\n      user_id: this.$route.params.id,\n      CV: \"\",\n      CV_url: \"\",\n      file: \"\",\n      alert: false,\n      nombrecompleto: \"\",\n      projects: null,\n      personal_website: \"\",\n      email: \"\",\n      phone: \"\",\n      linkedin: \"\",\n      carrera: \"\",\n      curso: 0,\n      FechaGraduacion: \"\",\n      CV: \"\",\n      password: \"\",\n      inputRules: [\n        v => !!v || \"This field is required\",\n        v => v.length >= 3 || \"Minimum length is 3 characters\"\n      ],\n      loading: false,\n      dialog: false\n    };\n  },\n  methods: {\n    pickFile() {\n      this.$refs.image.click();\n    },\n\n    onFilePicked(e) {\n      const files = e.target.files;\n      if (files[0] !== undefined) {\n        this.CV = files[0].name;\n        if (this.CV.lastIndexOf(\".\") <= 0) {\n          return;\n        }\n        const fr = new FileReader();\n        fr.readAsDataURL(files[0]);\n        fr.addEventListener(\"load\", () => {\n          this.CV_url = fr.result;\n          this.file = files[0]; // this is an image file that can be sent to server...\n        });\n      } else {\n        this.CV = \"\";\n        this.file = \"\";\n        this.CV_url = \"\";\n      }\n    },\n\n    fetchData() {\n      const url = `${API_BASE}/user/` + this.$route.params.id;\n      console.log(url);\n      axios\n        .get(url, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        })\n        .then(response => {\n          console.log(\"Response\", response);\n\n          this.projects = response.data.data;\n          this.email = response.data.data.email;\n          this.curso = response.data.data.Curso;\n          this.linkedin = response.data.data.LinkedIn;\n          this.nombrecompleto = response.data.data.NombreCompleto;\n          this.personal_website = response.data.data.personal_website;\n          this.carrera = response.data.data.carrera;\n          this.phone = response.data.data.Phone;\n          this.CV = response.data.data.CV;\n          this.CV_url = response.data.data.CV_url;\n\n          console.log(this.projects);\n        });\n    },\n    update() {\n      console.log(\"UPDATE\");\n\n      if (this.$refs.form.validate()) {\n        this.loading = true;\n        const project = {\n          email: this.email,\n          Curso: this.curso,\n          LinkedIn: this.linkedin,\n          NombreCompleto: this.nombrecompleto,\n          personal_website: this.personal_website,\n          carrera: this.carrera,\n          Phone: this.phone\n        };\n        let URL = `${API_BASE}/user/` + this.$route.params.id;\n\n        console.log(\"Project\", project);\n        console.log(\"URL\", URL);\n\n        axios\n          .put(URL, project, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(function(response) {\n            console.log(\"Response1\", response);\n            this.alert = true;\n          })\n          .catch(function(error) {\n            console.log(error);\n          });\n\n        // Upload file to server\n        let formData = new FormData();\n        formData.append(\"file\", this.file);\n        URL = `${API_BASE}/user/upload/` + this.$route.params.id;\n        axios\n          .put(URL, formData, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(function(response) {\n            console.log(\"response2\", response);\n          })\n          .catch(function(error) {\n            console.log(\"error\", error);\n          });\n        this.$emit(\"solicitudEnviada\");\n      }\n\n      this.loading = false;\n      this.dialog = false;\n    },\n    sortBy(prop) {\n      if (this.direction) {\n        this.direction = false;\n        this.projects.sort((a, b) => (a[prop] < b[prop] ? -1 : 1));\n      } else {\n        this.direction = true;\n        this.projects.sort((a, b) => (a[prop] > b[prop] ? -1 : 1));\n      }\n    }\n  },\n  mounted() {\n    this.fetchData();\n  }\n};\n</script>"],"sourceRoot":"src/views/Admin"}]}