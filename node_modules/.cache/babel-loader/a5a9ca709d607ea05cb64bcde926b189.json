{"remainingRequest":"/Users/zurdo/Projects/ProyectoSoftware/client/node_modules/babel-loader/lib/index.js!/Users/zurdo/Projects/ProyectoSoftware/client/node_modules/eslint-loader/index.js??ref--13-0!/Users/zurdo/Projects/ProyectoSoftware/client/src/router.js","dependencies":[{"path":"/Users/zurdo/Projects/ProyectoSoftware/client/src/router.js","mtime":1550231686332},{"path":"/Users/zurdo/Projects/ProyectoSoftware/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/ProyectoSoftware/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/ProyectoSoftware/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport Vue from \"vue\";\nimport Router from \"vue-router\";\nimport store from \"./store.js\";\nimport Confirmar from \"./views/Confirmar.vue\";\nimport Login from \"./views/Login.vue\";\nimport Dashboard from \"./views/Dashboard.vue\";\nimport Mensajes from \"./views/Mensajes.vue\";\nimport Chat from \"./views/Chat.vue\";\nimport Register from \"./components/Register.vue\";\nVue.use(Router);\nvar router = new Router({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes: [{\n    path: \"/\",\n    name: \"Dashboard\",\n    component: Dashboard,\n    meta: {\n      requiresAuth: false\n    }\n  }, {\n    path: \"/mensajes/\",\n    name: \"Mensajes\",\n    component: Mensajes,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/mensajes/:id\",\n    name: \"Mensajes\",\n    component: Chat,\n    meta: {\n      requiresAuth: true\n    }\n  }, {\n    path: \"/login\",\n    name: \"login\",\n    component: Login\n  }, {\n    path: \"/register\",\n    name: \"register\",\n    component: Register\n  }, {\n    path: \"/confirmar/:token\",\n    name: \"confirmar-user\",\n    component: Confirmar,\n    meta: {\n      requiresAuth: false\n    }\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  if (to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  })) {\n    if (store.getters.isLoggedIn) {\n      console.log(\"Logged in!\");\n\n      if (to.meta.adminAuth) {\n        var esAdmin = store.getters.isAdmin;\n        console.log(\"esAdmin\", esAdmin);\n\n        if (esAdmin == \"true\") {\n          next();\n        } else {\n          next(\"/\");\n        }\n      } else {\n        next();\n      }\n\n      return;\n    }\n\n    next(\"/login\");\n  } else {\n    next();\n  }\n});\nexport default router;",{"version":3,"sources":["/Users/zurdo/Projects/ProyectoSoftware/client/src/router.js"],"names":["Vue","Router","store","Confirmar","Login","Dashboard","Mensajes","Chat","Register","use","router","mode","base","process","env","BASE_URL","routes","path","name","component","meta","requiresAuth","beforeEach","to","from","next","matched","some","record","getters","isLoggedIn","console","log","adminAuth","esAdmin","isAdmin"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,KAAP,MAAkB,YAAlB;AAEA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AAEA,OAAOC,QAAP,MAAqB,2BAArB;AAEAR,GAAG,CAACS,GAAJ,CAAQR,MAAR;AAEA,IAAIS,MAAM,GAAG,IAAIT,MAAJ,CAAW;AACtBU,EAAAA,IAAI,EAAE,SADgB;AAEtBC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFI;AAItBC,EAAAA,MAAM,EAAE,CACN;AACEC,IAAAA,IAAI,EAAE,GADR;AAEEC,IAAAA,IAAI,EAAE,WAFR;AAGEC,IAAAA,SAAS,EAAEd,SAHb;AAIEe,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GADM,EASN;AACEJ,IAAAA,IAAI,EAAE,YADR;AAEEC,IAAAA,IAAI,EAAE,UAFR;AAGEC,IAAAA,SAAS,EAAEb,QAHb;AAIEc,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GATM,EAiBN;AACEJ,IAAAA,IAAI,EAAE,eADR;AAEEC,IAAAA,IAAI,EAAE,UAFR;AAGEC,IAAAA,SAAS,EAAEZ,IAHb;AAIEa,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GAjBM,EAyBN;AACEJ,IAAAA,IAAI,EAAE,QADR;AAEEC,IAAAA,IAAI,EAAE,OAFR;AAGEC,IAAAA,SAAS,EAAEf;AAHb,GAzBM,EA8BN;AACEa,IAAAA,IAAI,EAAE,WADR;AAEEC,IAAAA,IAAI,EAAE,UAFR;AAGEC,IAAAA,SAAS,EAAEX;AAHb,GA9BM,EAoCN;AACES,IAAAA,IAAI,EAAE,mBADR;AAEEC,IAAAA,IAAI,EAAE,gBAFR;AAGEC,IAAAA,SAAS,EAAEhB,SAHb;AAIEiB,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV;AAJR,GApCM;AAJc,CAAX,CAAb;AAmDAX,MAAM,CAACY,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAIF,EAAE,CAACG,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACR,IAAP,CAAYC,YAAhB;AAAA,GAAtB,CAAJ,EAAyD;AACvD,QAAInB,KAAK,CAAC2B,OAAN,CAAcC,UAAlB,EAA8B;AAC5BC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;;AACA,UAAIT,EAAE,CAACH,IAAH,CAAQa,SAAZ,EAAuB;AACrB,YAAMC,OAAO,GAAGhC,KAAK,CAAC2B,OAAN,CAAcM,OAA9B;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBE,OAAvB;;AACA,YAAIA,OAAO,IAAI,MAAf,EAAuB;AACrBT,UAAAA,IAAI;AACL,SAFD,MAEO;AACLA,UAAAA,IAAI,CAAC,GAAD,CAAJ;AACD;AACF,OARD,MAQO;AACLA,QAAAA,IAAI;AACL;;AACD;AACD;;AACDA,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACD,GAjBD,MAiBO;AACLA,IAAAA,IAAI;AACL;AACF,CArBD;AAuBA,eAAef,MAAf","sourcesContent":["import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport store from \"./store.js\";\n\nimport Confirmar from \"./views/Confirmar.vue\";\nimport Login from \"./views/Login.vue\";\nimport Dashboard from \"./views/Dashboard.vue\";\nimport Mensajes from \"./views/Mensajes.vue\";\nimport Chat from \"./views/Chat.vue\";\n\nimport Register from \"./components/Register.vue\";\n\nVue.use(Router);\n\nlet router = new Router({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n\n  routes: [\n    {\n      path: \"/\",\n      name: \"Dashboard\",\n      component: Dashboard,\n      meta: {\n        requiresAuth: false\n      }\n    },\n    {\n      path: \"/mensajes/\",\n      name: \"Mensajes\",\n      component: Mensajes,\n      meta: {\n        requiresAuth: true\n      }\n    },\n    {\n      path: \"/mensajes/:id\",\n      name: \"Mensajes\",\n      component: Chat,\n      meta: {\n        requiresAuth: true\n      }\n    },\n    {\n      path: \"/login\",\n      name: \"login\",\n      component: Login\n    },\n    {\n      path: \"/register\",\n      name: \"register\",\n      component: Register\n    },\n\n    {\n      path: \"/confirmar/:token\",\n      name: \"confirmar-user\",\n      component: Confirmar,\n      meta: {\n        requiresAuth: false\n      }\n    }\n  ]\n});\n\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (store.getters.isLoggedIn) {\n      console.log(\"Logged in!\");\n      if (to.meta.adminAuth) {\n        const esAdmin = store.getters.isAdmin;\n        console.log(\"esAdmin\", esAdmin);\n        if (esAdmin == \"true\") {\n          next();\n        } else {\n          next(\"/\");\n        }\n      } else {\n        next();\n      }\n      return;\n    }\n    next(\"/login\");\n  } else {\n    next();\n  }\n});\n\nexport default router;\n"]}]}