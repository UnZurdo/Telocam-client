{"remainingRequest":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zurdo/Projects/vue-auth-vuex/src/views/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zurdo/Projects/vue-auth-vuex/src/views/Profile.vue","mtime":1548388807083},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/vuetify-loader/lib/loader.js","mtime":1543737895000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zurdo/Projects/vue-auth-vuex/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from \"axios\";\nimport store from \"../store.js\";\nimport { API_BASE } from \"../config\";\nimport PerfilEmpresas from \"../components/PerfilEmpresas.vue\";\n\nexport default {\n  components: { PerfilEmpresas },\n\n  data() {\n    return {\n      empresa: \"\",\n      CV: \"\",\n      CV_url: \"\",\n      file: \"\",\n      alert: false,\n      nombrecompleto: \"\",\n      projects: null,\n      personal_website: \"\",\n      email: \"\",\n      phone: \"\",\n      linkedin: \"\",\n      carrera: \"\",\n      curso: 0,\n      FechaGraduacion: \"\",\n      CV: \"\",\n      password: \"\",\n      inputRules: [\n        v => !!v || \"This field is required\",\n        v => v.length >= 3 || \"Minimum length is 3 characters\"\n      ],\n      loading: false,\n      dialog: false\n    };\n  },\n  methods: {\n    pickFile() {\n      this.$refs.image.click();\n    },\n\n    onFilePicked(e) {\n      const files = e.target.files;\n      if (files[0] !== undefined) {\n        this.CV = files[0].name;\n        if (this.CV.lastIndexOf(\".\") <= 0) {\n          return;\n        }\n        const fr = new FileReader();\n        fr.readAsDataURL(files[0]);\n        fr.addEventListener(\"load\", () => {\n          this.CV_url = fr.result;\n          this.file = files[0]; // this is an image file that can be sent to server...\n        });\n      } else {\n        this.CV = \"\";\n        this.file = \"\";\n        this.CV_url = \"\";\n      }\n    },\n\n    fetchData() {\n      const url = `${API_BASE}/user/` + localStorage.user;\n      console.log(url);\n      axios\n        .get(url, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        })\n        .then(response => {\n          console.log(\"Response\", response);\n\n          this.projects = response.data.data;\n          this.email = response.data.data.email;\n          this.curso = response.data.data.Curso;\n          this.linkedin = response.data.data.LinkedIn;\n          this.nombrecompleto = response.data.data.NombreCompleto;\n          this.personal_website = response.data.data.personal_website;\n          this.carrera = response.data.data.carrera;\n          this.phone = response.data.data.Phone;\n          this.CV = response.data.data.CV;\n          this.CV_url = response.data.data.CV_url;\n          this.empresa = response.data.data.esEmpresa;\n\n          console.log(this.projects);\n        });\n    },\n    update() {\n      console.log(\"UPDATE\");\n\n      if (this.$refs.form.validate()) {\n        this.loading = true;\n        const project = {\n          email: this.email,\n          Curso: this.curso,\n          LinkedIn: this.linkedin,\n          NombreCompleto: this.nombrecompleto,\n          personal_website: this.personal_website,\n          carrera: this.carrera,\n          Phone: this.phone\n        };\n        let URL = `${API_BASE}/user/` + localStorage.user;\n\n        console.log(\"Project\", project);\n        console.log(\"URL\", URL);\n\n        axios\n          .put(URL, project, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(function(response) {\n            console.log(\"Response1\", response);\n            this.alert = true;\n          })\n          .catch(function(error) {\n            console.log(error);\n          });\n\n        // Upload file to server\n        let formData = new FormData();\n        formData.append(\"file\", this.file);\n        URL = `${API_BASE}/user/upload/` + localStorage.user;\n        axios\n          .put(URL, formData, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(function(response) {\n            console.log(\"response2\", response);\n          })\n          .catch(function(error) {\n            console.log(\"error\", error);\n          });\n        this.$emit(\"solicitudEnviada\");\n      }\n\n      this.loading = false;\n      this.dialog = false;\n    },\n    sortBy(prop) {\n      if (this.direction) {\n        this.direction = false;\n        this.projects.sort((a, b) => (a[prop] < b[prop] ? -1 : 1));\n      } else {\n        this.direction = true;\n        this.projects.sort((a, b) => (a[prop] > b[prop] ? -1 : 1));\n      }\n    }\n  },\n  mounted() {\n    this.fetchData();\n  },\n  computed: {\n    esEstudiante: function() {\n      if (!this.empresa) return true;\n    },\n    esEmpresa: function() {\n      if (this.empresa) return true;\n    }\n  }\n};\n",{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login\">\n    <v-container class=\"pa-5\">\n      <div>\n        <v-alert v-model=\"alert\" dismissible type=\"success\">Perfil actualizado</v-alert>\n      </div>\n      <v-card class=\"pa-5 mb-3\">\n        <v-card-title class=\"text-center\">\n          <v-container>\n            <h1 class=\"heading grey--text ml-2\">Profile</h1>\n          </v-container>\n        </v-card-title>\n\n        <v-card-text>\n          <v-form class=\"px-3\" ref=\"form\">\n            <v-text-field\n              v-model=\"nombrecompleto\"\n              prepend-icon=\"perm_identity\"\n              label=\"Nombre Completo\"\n              :rules=\"inputRules\"\n            ></v-text-field>\n            <v-text-field v-model=\"email\" prepend-icon=\"email\" label=\"Email\" :rules=\"inputRules\"></v-text-field>\n\n            <v-text-field v-model=\"personal_website\" label=\"Web personal\" prepend-icon=\"web\"></v-text-field>\n            <v-text-field v-model=\"phone\" label=\"Phone*\" prepend-icon=\"local_phone\"></v-text-field>\n            <v-text-field v-model=\"carrera\" label=\"Carrera*\" prepend-icon=\"work\"></v-text-field>\n            <v-text-field v-model=\"linkedin\" label=\"LinkedIn\" prepend-icon=\"link\"></v-text-field>\n            <div class=\"ml-4\">\n              <span class=\"font-weight-light\">Curso</span>\n              <br>\n              <number-input v-model=\"curso\" :min=\"1\" :max=\"7\" inline controls></number-input>\n            </div>\n            <v-spacer></v-spacer>\n\n            <v-text-field\n              label=\"Seleciona CV\"\n              @click=\"pickFile\"\n              v-model=\"CV\"\n              prepend-icon=\"attach_file\"\n            ></v-text-field>\n            <input\n              type=\"file\"\n              style=\"display: none\"\n              ref=\"image\"\n              accept=\"application/pdf\"\n              @change=\"onFilePicked\"\n            >\n            <v-spacer></v-spacer>\n\n            <v-btn flat @click=\"update\" class=\"success ml-4 mt-3\" :loading=\"loading\">Update</v-btn>\n          </v-form>\n        </v-card-text>\n      </v-card>\n\n      <PerfilEmpresas class=\"pa-5 mb-3\" v-if=\"esEmpresa\"/>\n    </v-container>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport store from \"../store.js\";\nimport { API_BASE } from \"../config\";\nimport PerfilEmpresas from \"../components/PerfilEmpresas.vue\";\n\nexport default {\n  components: { PerfilEmpresas },\n\n  data() {\n    return {\n      empresa: \"\",\n      CV: \"\",\n      CV_url: \"\",\n      file: \"\",\n      alert: false,\n      nombrecompleto: \"\",\n      projects: null,\n      personal_website: \"\",\n      email: \"\",\n      phone: \"\",\n      linkedin: \"\",\n      carrera: \"\",\n      curso: 0,\n      FechaGraduacion: \"\",\n      CV: \"\",\n      password: \"\",\n      inputRules: [\n        v => !!v || \"This field is required\",\n        v => v.length >= 3 || \"Minimum length is 3 characters\"\n      ],\n      loading: false,\n      dialog: false\n    };\n  },\n  methods: {\n    pickFile() {\n      this.$refs.image.click();\n    },\n\n    onFilePicked(e) {\n      const files = e.target.files;\n      if (files[0] !== undefined) {\n        this.CV = files[0].name;\n        if (this.CV.lastIndexOf(\".\") <= 0) {\n          return;\n        }\n        const fr = new FileReader();\n        fr.readAsDataURL(files[0]);\n        fr.addEventListener(\"load\", () => {\n          this.CV_url = fr.result;\n          this.file = files[0]; // this is an image file that can be sent to server...\n        });\n      } else {\n        this.CV = \"\";\n        this.file = \"\";\n        this.CV_url = \"\";\n      }\n    },\n\n    fetchData() {\n      const url = `${API_BASE}/user/` + localStorage.user;\n      console.log(url);\n      axios\n        .get(url, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + localStorage.token\n          }\n        })\n        .then(response => {\n          console.log(\"Response\", response);\n\n          this.projects = response.data.data;\n          this.email = response.data.data.email;\n          this.curso = response.data.data.Curso;\n          this.linkedin = response.data.data.LinkedIn;\n          this.nombrecompleto = response.data.data.NombreCompleto;\n          this.personal_website = response.data.data.personal_website;\n          this.carrera = response.data.data.carrera;\n          this.phone = response.data.data.Phone;\n          this.CV = response.data.data.CV;\n          this.CV_url = response.data.data.CV_url;\n          this.empresa = response.data.data.esEmpresa;\n\n          console.log(this.projects);\n        });\n    },\n    update() {\n      console.log(\"UPDATE\");\n\n      if (this.$refs.form.validate()) {\n        this.loading = true;\n        const project = {\n          email: this.email,\n          Curso: this.curso,\n          LinkedIn: this.linkedin,\n          NombreCompleto: this.nombrecompleto,\n          personal_website: this.personal_website,\n          carrera: this.carrera,\n          Phone: this.phone\n        };\n        let URL = `${API_BASE}/user/` + localStorage.user;\n\n        console.log(\"Project\", project);\n        console.log(\"URL\", URL);\n\n        axios\n          .put(URL, project, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(function(response) {\n            console.log(\"Response1\", response);\n            this.alert = true;\n          })\n          .catch(function(error) {\n            console.log(error);\n          });\n\n        // Upload file to server\n        let formData = new FormData();\n        formData.append(\"file\", this.file);\n        URL = `${API_BASE}/user/upload/` + localStorage.user;\n        axios\n          .put(URL, formData, {\n            headers: {\n              \"Content-Type\": \"multipart/form-data\",\n              Authorization: \"Bearer \" + localStorage.token\n            }\n          })\n          .then(function(response) {\n            console.log(\"response2\", response);\n          })\n          .catch(function(error) {\n            console.log(\"error\", error);\n          });\n        this.$emit(\"solicitudEnviada\");\n      }\n\n      this.loading = false;\n      this.dialog = false;\n    },\n    sortBy(prop) {\n      if (this.direction) {\n        this.direction = false;\n        this.projects.sort((a, b) => (a[prop] < b[prop] ? -1 : 1));\n      } else {\n        this.direction = true;\n        this.projects.sort((a, b) => (a[prop] > b[prop] ? -1 : 1));\n      }\n    }\n  },\n  mounted() {\n    this.fetchData();\n  },\n  computed: {\n    esEstudiante: function() {\n      if (!this.empresa) return true;\n    },\n    esEmpresa: function() {\n      if (this.empresa) return true;\n    }\n  }\n};\n</script>"]}]}